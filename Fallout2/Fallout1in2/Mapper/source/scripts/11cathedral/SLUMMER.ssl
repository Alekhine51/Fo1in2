/*

	Cathedral - Slummer?

*/

/* Include Files */
#include "..\headers\define.h"
//#include "..\headers\necropolis.h"

#define NAME                    SCRIPT_SLUMMER
#define TOWN_REP_VAR            (GVAR_TOWN_REP_CATHEDRAL)

#include "..\headers\command.h"
#include "..\headers\modreact.h"

/* Standard Script Procedures */
procedure start;
procedure talk_p_proc;

procedure social_skills;
procedure slummer00;
procedure slummer01;
procedure slummer02;
procedure slummer03;
procedure slummer03a;
procedure slummer04;
procedure slummer04a;
procedure slummer05;
procedure slummer06;
procedure slummer07;
procedure slummer07a;
procedure slummer08;
procedure slummer09;
procedure slummer10;
procedure slummer10a;
procedure slummer11;
procedure slummer12;
procedure slummer13;
procedure slummer13a;
procedure slummer13b;
procedure slummer13c;
procedure slummer14;
procedure slummer15;
procedure slummer16;
procedure slummer17;
procedure slummer17a;
procedure slummer18;
procedure slummer19;
procedure slummer19a;
procedure slummer20;
procedure slummer21;
procedure slummer21a;
procedure slummer22;
procedure slummer23;
procedure slummer24;
procedure slummer25;
procedure slummer25a;
procedure slummer26;
procedure slummer26a;
procedure slummer27;
procedure slummer28;
procedure slummer29;
procedure slummer30;
procedure slummer31;
procedure slummer32;
procedure slummer33;
procedure slummer34;
procedure slummer35;
procedure slummer36;
procedure slummer36a;
procedure slummer36b;
procedure slummer37;
procedure slummer38a;
procedure slummer38;
procedure slummer39;
procedure slummer40;
procedure slummer41;
procedure slummer42;
procedure slummer43;
procedure slummer44;
procedure slummer45;
procedure slummer46;
procedure slummer47;
procedure slummer48;
procedure slummer49;
procedure slummer50;
procedure slummer51;
procedure slummer51a;
procedure slummer52;
procedure slummer52a;
procedure slummer53;
procedure slummer54;
procedure slummer54a;
procedure slummer55;
procedure slummer56;
procedure slummer57;
procedure slummer58;
procedure slummer59;
procedure slummer60;
procedure slummer61;
procedure slummer62;
procedure slummer63;
procedure slummer64;
procedure slummer65;
procedure slummer65a;
procedure slummer66;
procedure slummer67;
procedure slummerdone;
procedure slummerend;
procedure slummercombat;
procedure weapon_check;

variable tmp_hostile;
variable armed;
variable LASHERKNOWN;
variable Only_Once := 1;

procedure start begin
	if Only_Once then begin
		Only_Once := 0;
		set_self_team(TEAM_CATHEDRAL);
		set_self_ai(AI_CHILDREN_TRUE);
	end
	if (script_action == talk_proc) then begin//<--- talk_p_proc (Face icon), can also call "do_dialogue" or "do_dialog"
		call talk_p_proc;
	end
	else begin
		if ((script_action == look_at_proc) or (script_action == description_proc)) then begin// 21 is look_at, 3 is description (Binoculars)   //NEED TO FIX THIS, DUPLICATE DESCRIPTIONS IS BULLSHIT. --Sduibek
			script_overrides;
			display_msg(mstr(100));
		end
		else begin
			if (script_action == destroy_proc) then begin//destroy_p_proc - Object or Critter has been killed or otherwise eradicated. Fall down go boom.
				inc_inv_evil_crit
			end
			else begin
				if (script_action == pickup_proc) then begin//<---caught stealing! (pickup_p_proc)
					tmp_hostile := 1;
				end
				else begin
					if (script_action == critter_proc) then begin//<-- critter_p_proc - (can also be "Critter_Action") - do they see you, should they wander, should they attack you, etc..
						if (tmp_hostile) then begin
							tmp_hostile := 0;
							attack(dude_obj);
						end
					end
				end
			end
		end
	end
end



procedure talk_p_proc
begin
	dude_look_at_self;
	get_reaction
	call weapon_check;
	start_dialog(self_obj, 4);
	gsay_start;
	if dude_wearing_coc_robe then begin
		if (local_var(4) == 0) then begin
			if (armed == 1) then begin
				call slummer02;
			end
			else begin
				call slummer03;
			end
		end
		else begin
			set_local_var(4, 1);
			call slummer01;
		end
	end
	else begin
		set_local_var(4, 1);
		if (global_var(GVAR_CATHEDRAL_ENEMY) == 1) then begin
			call slummer00;
		end
		else begin
			if (armed == 1) then begin
				if (has_rep_champion) then begin
					call slummer04;
				end
				else begin
					if (has_rep_childkiller or (has_rep_berserker)) then begin
						call slummer06;
					end
					else begin
						call slummer05;
					end
				end
			end
			else begin
				if (has_rep_champion) then begin
					call slummer07;
				end
				else begin
					if (has_rep_childkiller or (has_rep_berserker)) then begin
						call slummer09;
					end
					else begin
						call slummer08;
					end
				end
			end
		end
	end
	gsay_end;
	end_dialogue;
end

procedure social_skills
begin
	script_overrides;
	get_reaction
	call talk_p_proc;
end

procedure slummer00
begin
	NMessage(101);
end

procedure slummer01
begin
	NMessage(102);
end

procedure slummer02
begin
	Reply(103);
	giq_option(7, NAME, 104, slummer10, NEUTRAL_REACTION);
	giq_option(7, NAME, 105, slummer11, NEUTRAL_REACTION);
	giq_option(4, NAME, 106, slummer13, NEUTRAL_REACTION);
	giq_option(4, NAME, 107, slummer15, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 108, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 109, slummer18, NEUTRAL_REACTION);
	end
	giq_option(-3, NAME, 110, slummer14, NEUTRAL_REACTION);
end

procedure slummer03
begin
	Reply(111);
	giq_option(7, NAME, 112, slummer03a, NEUTRAL_REACTION);
	giq_option(7, NAME, 113, slummer20, NEUTRAL_REACTION);
	giq_option(4, NAME, 114, slummer21, NEUTRAL_REACTION);
	giq_option(4, NAME, 115, slummer22, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 116, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 117, slummer17, NEUTRAL_REACTION);
	end
	giq_option(-3, NAME, 118, slummer23, NEUTRAL_REACTION);
end

procedure slummer03a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer19;
	end
	else begin
		call slummer49;
	end
end

procedure slummer04
begin
	Reply(119);
	giq_option(7, NAME, 120, slummer04a, NEUTRAL_REACTION);
	giq_option(7, NAME, 121, slummer20, NEUTRAL_REACTION);
	giq_option(4, NAME, 122, slummer26, NEUTRAL_REACTION);
	giq_option(4, NAME, 123, slummer27, NEUTRAL_REACTION);
	giq_option(4, NAME, 124, slummer15, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 125, slummer16, NEUTRAL_REACTION);
	end
	giq_option(-3, NAME, 126, slummer28, NEUTRAL_REACTION);
end

procedure slummer04a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 20))) then begin
		call slummer25;
	end
	else begin
		call slummer49;
	end
end

procedure slummer05
begin
	Reply(127);
	giq_option(7, NAME, 128, slummer29, NEUTRAL_REACTION);
	giq_option(4, NAME, 129, slummer30, NEUTRAL_REACTION);
	giq_option(4, NAME, 130, slummer31, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 131, slummer16, NEUTRAL_REACTION);
	end
	giq_option(-3, NAME, 132, slummer28, NEUTRAL_REACTION);
end

procedure slummer06
begin
	Reply(133);
	giq_option(7, NAME, 134, slummer29, NEUTRAL_REACTION);
	giq_option(4, NAME, 135, slummer32, NEUTRAL_REACTION);
	giq_option(4, NAME, 136, slummer31, NEUTRAL_REACTION);
	giq_option(4, NAME, 137, slummer34, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 138, slummer34, NEUTRAL_REACTION);
	end
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 139, slummer16, NEUTRAL_REACTION);
	end
	giq_option(-3, NAME, 140, slummer28, NEUTRAL_REACTION);
end

procedure slummer07
begin
	Reply(141);
	giq_option(7, NAME, 142, slummer07a, NEUTRAL_REACTION);
	giq_option(7, NAME, 143, slummer20, NEUTRAL_REACTION);
	giq_option(4, NAME, 144, slummer33, NEUTRAL_REACTION);
	giq_option(4, NAME, 145, slummer16, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 146, slummer16, NEUTRAL_REACTION);
	end
	giq_option(-3, NAME, 147, slummer35, NEUTRAL_REACTION);
end

procedure slummer07a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer29;
	end
	else begin
		call slummer49;
	end
end

procedure slummer08
begin
	Reply(148);
	giq_option(7, NAME, 149, slummer07a, NEUTRAL_REACTION);
	giq_option(7, NAME, 150, slummer20, NEUTRAL_REACTION);
	giq_option(4, NAME, 151, slummer36, NEUTRAL_REACTION);
	giq_option(4, NAME, 152, slummer37, NEUTRAL_REACTION);
	giq_option(4, NAME, 153, slummer15, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 154, slummer16, NEUTRAL_REACTION);
	end
	giq_option(-3, NAME, 155, slummer35, NEUTRAL_REACTION);
end

procedure slummer09
begin
	NMessage(156);
end

procedure slummer10
begin
	Reply(157);
	giq_option(7, NAME, 158, slummer10a, NEUTRAL_REACTION);
	giq_option(7, NAME, 159, slummer20, NEUTRAL_REACTION);
	giq_option(4, NAME, 160, slummer36, NEUTRAL_REACTION);
	giq_option(4, NAME, 161, slummer37, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 162, slummer16, NEUTRAL_REACTION);
	end
end

procedure slummer10a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer38;
	end
	else begin
		call slummer61;
	end
end

procedure slummer11
begin
	LASHERKNOWN := 1;
	NMessage(163);
end

procedure slummer12
begin
end

procedure slummer13
begin
	Reply(165);
	giq_option(7, NAME, 166, slummer13a, NEUTRAL_REACTION);
	giq_option(7, NAME, 167, slummer13b, NEUTRAL_REACTION);
	giq_option(4, NAME, 168, slummer13c, NEUTRAL_REACTION);
	giq_option(4, NAME, 169, slummer43, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 170, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer13a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, -20))) then begin
		call slummer42;
	end
	else begin
		call slummer43;
	end
end

procedure slummer13b
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, -20))) then begin
		call slummer39;
	end
	else begin
		call slummer43;
	end
end

procedure slummer13c
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer14;
	end
	else begin
		call slummer43;
	end
end

procedure slummer14
begin
	NMessage(171);
end

procedure slummer15
begin
	NMessage(172);
end

procedure slummer16
begin
	Reply(173);
	giq_option(7, NAME, 174, slummer44, NEUTRAL_REACTION);
	giq_option(4, NAME, 175, slummer45, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 176, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer17
begin
	Reply(177);
	giq_option(7, NAME, 178, slummer17a, NEUTRAL_REACTION);
	giq_option(4, NAME, 179, slummerend, NEUTRAL_REACTION);
	giq_option(4, NAME, 180, slummercombat, NEUTRAL_REACTION);
end

procedure slummer17a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, -30))) then begin
		call slummer46;
	end
	else begin
		call slummer49;
	end
end

procedure slummer18
begin
	NMessage(181);
end

procedure slummer19
begin
	Reply(182);
	giq_option(7, NAME, 183, slummer19a, NEUTRAL_REACTION);
	giq_option(7, NAME, 184, slummer47, NEUTRAL_REACTION);
	giq_option(4, NAME, 185, slummer44, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 186, slummer44, NEUTRAL_REACTION);
	end
end

procedure slummer19a
begin
	call slummer49;
end

procedure slummer20
begin
	set_global_var(GVAR_MORPHEUS_KNOWN, 1);
	Reply(187);
	giq_option(7, NAME, 188, slummer47, NEUTRAL_REACTION);
	giq_option(4, NAME, 189, slummer44, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 190, slummer44, NEUTRAL_REACTION);
	end
end

procedure slummer21
begin
	Reply(191);
	giq_option(7, NAME, 192, slummer21a, NEUTRAL_REACTION);
	giq_option(7, NAME, 193, slummer11, NEUTRAL_REACTION);
	giq_option(4, NAME, 194, slummer20, NEUTRAL_REACTION);
	giq_option(4, NAME, 195, slummer15, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 196, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 197, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer21a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer25;
	end
	else begin
		call slummer49;
	end
end

procedure slummer22
begin
	LASHERKNOWN := 1;
	Reply(198);
	giq_option(7, NAME, 199, slummer50, NEUTRAL_REACTION);
	giq_option(7, NAME, 200, slummer49, NEUTRAL_REACTION);
	giq_option(4, NAME, 201, slummer33, NEUTRAL_REACTION);
	giq_option(4, NAME, 202, slummer20, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 203, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 204, slummer44, NEUTRAL_REACTION);
	end
end

procedure slummer23
begin
	NMessage(205);
end

procedure slummer24
begin
	set_global_var(GVAR_MORPHEUS_KNOWN, 1);
	NMessage(206);
end

procedure slummer25
begin
	Reply(207);
	giq_option(7, NAME, 208, slummer25a, NEUTRAL_REACTION);
	giq_option(7, NAME, 209, slummer52, NEUTRAL_REACTION);
	giq_option(4, NAME, 210, slummer33, NEUTRAL_REACTION);
	giq_option(4, NAME, 211, slummer54, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 212, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 213, slummer24, NEUTRAL_REACTION);
	end
end

procedure slummer25a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer51;
	end
	else begin
		call slummer49;
	end
end

procedure slummer26
begin
	Reply(214);
	giq_option(7, NAME, 215, slummer26a, NEUTRAL_REACTION);
	giq_option(7, NAME, 216, slummer33, NEUTRAL_REACTION);
	giq_option(4, NAME, 217, slummer55, NEUTRAL_REACTION);
	giq_option(4, NAME, 218, slummer54, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 219, slummer24, NEUTRAL_REACTION);
	end
end

procedure slummer26a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer51;
	end
	else begin
		call slummer49;
	end
end

procedure slummer27
begin
	Reply(220);
	giq_option(7, NAME, 221, slummer56, NEUTRAL_REACTION);
	giq_option(4, NAME, 222, slummer44, NEUTRAL_REACTION);
	giq_option(4, NAME, 223, slummer57, NEUTRAL_REACTION);
	giq_option(4, NAME, 224, slummer54, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 225, slummer16, NEUTRAL_REACTION);
	end
end

procedure slummer28
begin
	Reply(226);
	giq_option(-3, NAME, 227, slummer44, NEUTRAL_REACTION);
	giq_option(-3, NAME, 228, slummer49, NEUTRAL_REACTION);
end

procedure slummer29
begin
	Reply(229);
	giq_option(7, NAME, 230, slummer58, NEUTRAL_REACTION);
	giq_option(7, NAME, 231, slummer59, NEUTRAL_REACTION);
	giq_option(4, NAME, 232, slummer01, NEUTRAL_REACTION);
	giq_option(4, NAME, 233, slummer44, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 234, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer30
begin
	NMessage(235);
end

procedure slummer31
begin
	Reply(236);
	giq_option(7, NAME, 237, slummer52, NEUTRAL_REACTION);
	giq_option(7, NAME, 238, slummer44, NEUTRAL_REACTION);
	giq_option(4, NAME, 239, slummer18, NEUTRAL_REACTION);
	giq_option(4, NAME, 240, slummer20, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 241, slummer24, NEUTRAL_REACTION);
	end
end

procedure slummer32
begin
	set_global_var(GVAR_MORPHEUS_KNOWN, 1);
	LASHERKNOWN := 1;
	NMessage(242);
end

procedure slummer33
begin
	set_global_var(GVAR_MORPHEUS_KNOWN, 1);
	Reply(243);
	giq_option(7, NAME, 244, slummer47, NEUTRAL_REACTION);
	giq_option(4, NAME, 245, slummer44, NEUTRAL_REACTION);
	giq_option(4, NAME, 246, slummer45, NEUTRAL_REACTION);
end

procedure slummer34
begin
	Reply(247);
	giq_option(7, NAME, 248, slummer43, NEUTRAL_REACTION);
	giq_option(4, NAME, 249, slummer60, NEUTRAL_REACTION);
	giq_option(4, NAME, 250, slummer43, NEUTRAL_REACTION);
	giq_option(4, NAME, 251, slummercombat, NEUTRAL_REACTION);
end

procedure slummer35
begin
	NMessage(252);
end

procedure slummer36
begin
	Reply(253);
	giq_option(4, NAME, 254, slummer18, NEUTRAL_REACTION);
	if dude_wearing_coc_robe then begin
		giq_option(7, NAME, 255, slummer36a, NEUTRAL_REACTION);
		giq_option(4, NAME, 256, slummer52, NEUTRAL_REACTION);
	end
	else begin
		giq_option(7, NAME, 257, slummer36b, NEUTRAL_REACTION);
		giq_option(4, NAME, 258, slummer20, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 259, slummer24, NEUTRAL_REACTION);
	end
end

procedure slummer36a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer29;
	end
	else begin
		call slummer49;
	end
end

procedure slummer36b
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer26;
	end
	else begin
		call slummer49;
	end
end

procedure slummer37
begin
	NMessage(260);
end

procedure slummer38a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer52;
	end
	else begin
		call slummer52;
	end
end

procedure slummer38
begin
	Reply(261);
	giq_option(7, NAME, 262, slummer38a, NEUTRAL_REACTION);
	giq_option(4, NAME, 263, slummer01, NEUTRAL_REACTION);
	giq_option(4, NAME, 264, slummer44, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 265, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer39
begin
	NMessage(266);
end

procedure slummer40
begin
	NMessage(267);
end

procedure slummer41
begin
	set_global_var(GVAR_MORPHEUS_KNOWN, 1);
	NMessage(268);
end

procedure slummer42
begin
	Reply(269);
	giq_option(4, NAME, 270, slummer44, NEUTRAL_REACTION);
	giq_option(4, NAME, 271, slummer50, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 272, slummer49, NEUTRAL_REACTION);
	end
	giq_option(-3, NAME, 273, slummer48, NEUTRAL_REACTION);
end

procedure slummer43
begin
	BMessage(274);
	call slummercombat;
end

procedure slummer44
begin
	NMessage(275);
end

procedure slummer45
begin
	NMessage(276);
end

procedure slummer46
begin
	Reply(277);
	giq_option(7, NAME, 278, slummer61, NEUTRAL_REACTION);
	giq_option(4, NAME, 279, slummer41, NEUTRAL_REACTION);
	giq_option(4, NAME, 280, slummer44, NEUTRAL_REACTION);
	giq_option(4, NAME, 281, slummer44, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 282, slummer44, NEUTRAL_REACTION);
	end
end

procedure slummer47
begin
	NMessage(283);
end

procedure slummer48
begin
	NMessage(284);
end

procedure slummer49
begin
	NMessage(285);
end

procedure slummer50
begin
	NMessage(286);
end

procedure slummer51
begin
	Reply(287);
	giq_option(7, NAME, 288, slummer51a, NEUTRAL_REACTION);
	giq_option(7, NAME, 289, slummer63, NEUTRAL_REACTION);
	giq_option(4, NAME, 290, slummer64, NEUTRAL_REACTION);
	giq_option(4, NAME, 291, slummer54, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 292, slummer24, NEUTRAL_REACTION);
	end
end

procedure slummer51a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer62;
	end
	else begin
		call slummer49;
	end
end

procedure slummer52
begin
	Reply(293);
	giq_option(7, NAME, 294, slummer52a, NEUTRAL_REACTION);
	giq_option(7, NAME, 295, slummer53, NEUTRAL_REACTION);
	giq_option(4, NAME, 296, slummer41, NEUTRAL_REACTION);
	giq_option(4, NAME, 297, slummer44, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 298, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer52a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer65;
	end
	else begin
		call slummer49;
	end
end

procedure slummer53
begin
	set_global_var(GVAR_MORPHEUS_KNOWN, 1);
	NMessage(299);
end

procedure slummer54
begin
	Reply(300);
	giq_option(7, NAME, 301, slummer54a, NEUTRAL_REACTION);
	giq_option(4, NAME, 302, slummer44, NEUTRAL_REACTION);
	giq_option(4, NAME, 303, slummer44, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 304, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 305, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer54a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer51;
	end
	else begin
		call slummer49;
	end
end

procedure slummer55
begin
	Reply(306);
	giq_option(7, NAME, 307, slummer66, NEUTRAL_REACTION);
	giq_option(7, NAME, 308, slummer66, NEUTRAL_REACTION);
	giq_option(4, NAME, 309, slummer44, NEUTRAL_REACTION);
	giq_option(4, NAME, 310, slummer41, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 311, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 312, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer56
begin
	Reply(313);
	giq_option(7, NAME, 314, slummer33, NEUTRAL_REACTION);
	giq_option(7, NAME, 315, slummer54, NEUTRAL_REACTION);
	giq_option(4, NAME, 316, slummer41, NEUTRAL_REACTION);
	giq_option(4, NAME, 317, slummer44, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 318, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 319, slummer45, NEUTRAL_REACTION);
	end
end

procedure slummer57
begin
	NMessage(320);
end

procedure slummer58
begin
	NMessage(321);
end

procedure slummer59
begin
	NMessage(322);
end

procedure slummer60
begin
	Reply(323);
	giq_option(4, NAME, 324, slummerdone, NEUTRAL_REACTION);
	giq_option(4, NAME, 325, slummer40, NEUTRAL_REACTION);
	giq_option(4, NAME, 326, slummercombat, NEUTRAL_REACTION);
end

procedure slummer61
begin
	NMessage(327);
end

procedure slummer62
begin
	Reply(328);
	giq_option(7, NAME, 329, slummer58, NEUTRAL_REACTION);
	giq_option(7, NAME, 330, slummer59, NEUTRAL_REACTION);
	giq_option(4, NAME, 331, slummer01, NEUTRAL_REACTION);
	giq_option(4, NAME, 332, slummer44, NEUTRAL_REACTION);
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 333, slummercombat, NEUTRAL_REACTION);
	end
end

procedure slummer63
begin
	Reply(334);
	giq_option(7, NAME, 335, slummer67, NEUTRAL_REACTION);
	giq_option(4, NAME, 336, slummer41, NEUTRAL_REACTION);
	giq_option(4, NAME, 337, slummer44, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 338, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 339, slummer35, NEUTRAL_REACTION);
	end
end

procedure slummer64
begin
	NMessage(340);
end

procedure slummer65
begin
	Reply(341);
	giq_option(7, NAME, 342, slummer65a, NEUTRAL_REACTION);
	giq_option(4, NAME, 343, slummer41, NEUTRAL_REACTION);
	giq_option(4, NAME, 344, slummer44, NEUTRAL_REACTION);
	if (global_var(GVAR_ALCOHOL_ADDICT) == 1) then begin
		giq_option(4, NAME, 345, slummer16, NEUTRAL_REACTION);
	end
	if (has_rep_berserker) then begin
		giq_option(4, NAME, 346, slummer35, NEUTRAL_REACTION);
	end
end

procedure slummer65a
begin
	if (is_success(roll_vs_skill(dude_obj, SKILL_SPEECH, 0))) then begin
		call slummer49;
	end
	else begin
		call slummer49;
	end
end

procedure slummer66
begin
	NMessage(347);
end

procedure slummer67
begin
	NMessage(348);
end

procedure slummerdone
begin
	gsay_option(NAME, 349, slummerend, 50);
end

procedure slummerend
begin
end

procedure slummercombat
begin
	set_global_var(GVAR_CATHEDRAL_ENEMY, 1);
	tmp_hostile := 1;
end

procedure weapon_check
begin

	if (dude_is_armed) then begin
		armed := 1;
	end
	else begin
		armed := 0;
	end
end
