/*

   Fallout et Tu - Settings

   Reads data from the fo1_settings.ini file and switches GVAR's accordingly.

*/

#include "..\headers\define.h"

procedure start;

procedure settings;

#define ini_path                          "config\\fo1_settings.ini"
#define ini_settings(gvar, option_name)   set_global_var(gvar, get_ini_setting(ini_path + "|" + section + "|" + option_name))

procedure start begin
   if (game_loaded) then begin
      set_global_script_type(0);
      call settings;
   end
end

procedure settings begin
variable section;

   // Show ddraw warning
   //if (get_ini_setting("ddraw.ini|Debugging|Fallout1Behavior") != 1) then
   //   float_msg(dude_obj, "Warning! <Fallout1Behavior> has been disabled in the ddraw.ini! Some scripts will break now!", FLOAT_MSG_WARNING);

   //===================================================
   //    Debug
   //===================================================
   section := "DEBUG";
   ini_settings(GVAR_CHEAT_DEBUG_MENU_ENABLED, "GVAR_CHEAT_DEBUG_MENU_ENABLED");
   ini_settings(GVAR_DEBUG_MODE_MESSAGES_ON, "GVAR_DEBUG_MODE_MESSAGES_ON");

   //===================================================
   //    Fo1in2
   //===================================================
   section := "Fo1in2";
   ini_settings(GVAR_ENABLE_MOTORCYCLE, "GVAR_ENABLE_MOTORCYCLE");
   ini_settings(GVAR_DISABLE_FLUFF_ENCOUNTER, "GVAR_DISABLE_FLUFF_ENCOUNTER");
   ini_settings(GVAR_UNLIMITED_PARTY_MEMBERS, "GVAR_UNLIMITED_PARTY_MEMBERS");
   ini_settings(GVAR_MR_HANDYC_HIRELING, "GVAR_MR_HANDYC_HIRELING");
   ini_settings(GVAR_AUTO_DOORS_CLOSING, "GVAR_AUTO_DOORS_CLOSING");
   ini_settings(GVAR_ARMOR_DESTROY_MOD, "GVAR_ARMOR_DESTROY_MOD");
   ini_settings(GVAR_ENABLE_FO2_MERCHANT_RESTOCK, "GVAR_ENABLE_FO2_MERCHANT_RESTOCK");
   ini_settings(GVAR_ENABLE_UNLIMITED_HPA, "GVAR_ENABLE_UNLIMITED_HPA");

   // Satellite locations:
   ini_settings(GVAR_ENABLE_SATELLITE_LOCATIONS, "GVAR_ENABLE_SATELLITE_LOCATIONS");
   if fo1in2_satellite_loc_disabled then begin
      invisible_on_map(AREA_SHADY_CAVES)
      invisible_on_map(AREA_HUB_FARM)
      invisible_on_map(AREA_HUB_LAIR)
   end

   // Invasion timer:
   ini_settings(GVAR_FOLLOWERS_INVADED_DATE, "GVAR_FOLLOWERS_INVADED_DATE");
   ini_settings(GVAR_NECROPOLIS_INVADED_DATE, "GVAR_NECROPOLIS_INVADED_DATE");
   ini_settings(GVAR_THE_HUB_INVADED_DATE, "GVAR_THE_HUB_INVADED_DATE");
   ini_settings(GVAR_BROTHERHOOD_INVADED_DATE, "GVAR_BROTHERHOOD_INVADED_DATE");
   ini_settings(GVAR_JUNKTOWN_INVADED_DATE, "GVAR_JUNKTOWN_INVADED_DATE");
   ini_settings(GVAR_SHADY_SANDS_INVADED_DATE, "GVAR_SHADY_SANDS_INVADED_DATE");
   ini_settings(GVAR_VAULT_13_INVADED_DATE, "GVAR_VAULT_13_INVADED_DATE");

   //===================================================
   //    FIXT
   //===================================================
   section := "FIXT";
   ini_settings(GVAR_FIXT_BUGFIXES_ONLY, "GVAR_FIXT_BUGFIXES_ONLY");

   ini_settings(GVAR_AGATHA_IS_ENABLED, "GVAR_AGATHA_IS_ENABLED");
   ini_settings(GVAR_BOS_LORRI_CHA_ENABLED, "GVAR_BOS_LORRI_CHA_ENABLED");
   ini_settings(GVAR_ENABLE_HOOKERS, "GVAR_ENABLE_HOOKERS");
   ini_settings(GVAR_STAPLE_RESTOCK_WEEKS, "GVAR_STAPLE_RESTOCK_WEEKS");
   ini_settings(GVAR_STAPLE_INIT_NUM_BOOKS, "GVAR_STAPLE_INIT_NUM_BOOKS");
   ini_settings(GVAR_STAPLE_BOOKS_RESPAWN_MIN, "GVAR_STAPLE_BOOKS_RESPAWN_MIN");
   ini_settings(GVAR_STAPLE_BOOKS_RESPAWN_MAX, "GVAR_STAPLE_BOOKS_RESPAWN_MAX");
   ini_settings(GVAR_STAPLE_DIFFICULTY_BASED, "GVAR_STAPLE_DIFFICULTY_BASED");
   ini_settings(GVAR_BITS_BOB_GOES_TO_JAIL, "GVAR_BITS_BOB_GOES_TO_JAIL");
   ini_settings(GVAR_FORTUNE_FINDER_HOW_MUCH, "GVAR_FORTUNE_FINDER_HOW_MUCH");
   ini_settings(GVAR_HUNTER_RESPAWNS, "GVAR_HUNTER_RESPAWNS");
   ini_settings(GVAR_EXPLOSIVES_RUIN_LOCKERS, "GVAR_EXPLOSIVES_RUIN_LOCKERS");
   ini_settings(GVAR_MBASE_RED_ONLY_PLAYER, "GVAR_MBASE_RED_ONLY_PLAYER");
   ini_settings(GVAR_MBASE_RED_ONLY_PARTY, "GVAR_MBASE_RED_ONLY_PARTY");
   ini_settings(GVAR_WILD_WASTELAND, "GVAR_WILD_WASTELAND");
   ini_settings(GVAR_IRONMAN_MODE, "GVAR_IRONMAN_MODE");
   ini_settings(GVAR_BOS_LORRI_SEX_ENABLED, "GVAR_BOS_LORRI_SEX_ENABLED");
   ini_settings(GVAR_BOS_LORRI_NUM_OPS_ALLOWED, "GVAR_BOS_LORRI_NUM_OPS_ALLOWED");

end
